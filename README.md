
# Консольное приложение "Книжная библиотека".

---
Стек (sqlalchemy, sqlite, tabulate, python312)

`sqlalchemy` - для работы с БД.

`tabulate` - для вывода результатов запросов в бд в консоле в виде таблицы.

* Установка зависимостей.
```python
#из корня проекта
python -m pip install -r requirements.txt
```
* Запуск программы.
```python
#из корня проекта
python main.py
```
---
* Дерево команд

Команды организованы в контекстные меню.

```shell
├──show
│   ├──all - Показывает все книги.
│   ├──id "book_id" - Показывает книгу по id.
│   ├──title "Название книги" - Показывает книгу по названию.
│   ├──author "Имя автора" - Показывает книги автора.
│   ├──year "Год" - Показывает книги за указанный год.
│   └──exit - Выход в пред идущее меню.
├──create - Добавление новой книги.
│   └──exit - Выход в пред идущее меню.
├──delete 
│   ├──id "book_id" - Удаляет книгу по id.
│   ├──title "Название книги" - Удаляет книгу по названию.
│   └──exit - Выход в пред идущее меню.
├──update
│   ├──status "book_id" "status_id" - Обновляет статус книги.
│   └──exit - Выход в пред идущее меню.
└──exit - вызод из приложения.
```
Нюансы:
* Времени мало, пока на данном функционале делаю паузу.
* Команда show id "id" - пропускает слова в аргументе и делает ошибочный запрос в БД, 
надо править, ошибочные запросы в базу не нужны.
*

---
* Структура приложения"

```shell
├──main.py - Файл для старта.
├──test.py - файл для тестирования функций. (тестировать запросы в БД от сюда)
├──crud - Create, Read, Update, Delete, модуль с функциями для работы с бд.
├──db - Настройки БД, и сама БД. + функции для обновления БД.
├──func - Дополнительные функции для приложения. (конвертор вывода БД в табличные строки)
├──menu - Командное меню
└──model - sqlalchemy Модель для работы с БД.
```
Нюансы:
* В crud пока что нет отдельных директорий, 
так как пока чт ов приложении 1 основная модель книги. 
Модель для статусов пока что реализована не в полной мере, статусы можно только читать.
* Создание и обновление таблиц в ручную. Нужен `alembic` для миграций.
* Тесты производятся из файла test так как движок к БД прописан из корневой директории.
* Лучше написать тесты на `pytest`.

